<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alvo-X</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #fff;
      overflow-x: hidden;
      padding-bottom: 100px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    .title {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 10px;
      color: #FFD700;
    }

    .subtitle {
      text-align: center;
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #aaa;
    }

    .tradingview-widget-container {
      margin: 0 auto;
      max-width: 100%;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 20px #FFD70055;
    }

    .temporizador {
      text-align: center;
      font-size: 1.8rem;
      margin: 30px 0;
      color: #FFD700;
    }

    select {
      padding: 10px;
      margin: 10px 0;
      background-color: #222;
      color: #fff;
      border: 1px solid #444;
      border-radius: 5px;
    }

    .titulo {
      font-size: 1.5rem;
      margin: 20px 0 10px;
      color: #FFD700;
    }

    .planilha {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    .planilha th, .planilha td {
      border: 1px solid #333;
      padding: 8px;
      text-align: center;
    }

    .planilha th {
      background-color: #222;
    }

    .sinal {
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 4px;
    }

    .verde { background-color: green; }
    .vermelho { background-color: red; }
    .amarelo { background-color: gold; color: #000; }
    .dourado { background-color: #daa520; }

    /* Rodapé visual opcional */
    footer {
      text-align: center;
      padding: 20px;
      background: #000;
      color: #aaa;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title">Alvo-X</h1>
    <p class="subtitle">Só copiar e colar as operações e começar lucrar</p>

    <!-- GRÁFICO -->
    <div class="tradingview-widget-container">
      <div id="tradingview_candle"></div>
    </div>

    <!-- SELECTS DE PAR E CORRETORA -->
    <label for="pares">Selecione o par de moedas:</label>
    <select id="pares">
      <option>EUR/USD (OTC)</option>
      <option>USD/JPY (OTC)</option>
      <option>AUD/CAD (OTC)</option>
    </select>

    <label for="corretora">Selecione a corretora:</label>
    <select id="corretora">
      <option>Obynex</option>
      <option>Astron</option>
    </select>

    <div class="temporizador" id="timer">Próximo sinal em: 60s</div>

    <h2 class="titulo">Histórico de Sinais</h2>
    <table class="planilha" id="historico">
      <thead>
        <tr>
          <th>Horário</th>
          <th>Par</th>
          <th>Sinal</th>
          <th>Resultado</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- SCRIPT TRADINGVIEW -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  <script>
    new TradingView.widget({
      "width": "100%",
      "height": 400,
      "symbol": "BINANCE:BTCUSDT",
      "interval": "1",
      "timezone": "Etc/UTC",
      "theme": "dark",
      "style": "1",
      "locale": "pt",
      "toolbar_bg": "#1d1d1d",
      "enable_publishing": false,
      "allow_symbol_change": true,
      "container_id": "tradingview_candle"
    });
  </script>

  <!-- SCRIPT DE SINAIS -->
  <script>
    const sinais = [
      { texto: 'COMPRA', classe: 'verde' },
      { texto: 'VENDA', classe: 'vermelho' },
      { texto: 'AGUARDANDO ANÁLISE', classe: 'amarelo' },
      { texto: 'NÃO HÁ TENDÊNCIAS', classe: 'dourado' }
    ];

    function gerarResultado() {
      return Math.random() < 0.7 ? 'WINN' : 'LOSS';
    }

    function gerarSinal() {
      const parSelecionado = document.getElementById("pares").value;
      const hora = new Date().toLocaleTimeString();
      const sinal = sinais[Math.floor(Math.random() * sinais.length)];
      const tabela = document.getElementById("historico").querySelector("tbody");

      const idLinha = 'linha-' + Date.now();
      const linha = document.createElement("tr");
      linha.setAttribute('id', idLinha);

      linha.innerHTML = `
        <td>${hora}</td>
        <td>${parSelecionado}</td>
        <td><span class="sinal ${sinal.classe}">${sinal.texto}</span></td>
        <td class="resultado">Aguardando...</td>
      `;
      tabela.insertBefore(linha, tabela.firstChild);

      if (sinal.texto === 'COMPRA' || sinal.texto === 'VENDA') {
        setTimeout(() => {
          const resultado = gerarResultado();
          const tdResultado = document.getElementById(idLinha).querySelector('.resultado');
          tdResultado.textContent = resultado;
          tdResultado.style.color = resultado === 'WINN' ? 'limegreen' : 'red';
          tdResultado.style.fontWeight = 'bold';
        }, 60000);
      } else {
        document.getElementById(idLinha).querySelector('.resultado').textContent = '';
      }
    }

    let tempo = 60;
    function atualizarTimer() {
      document.getElementById("timer").innerText = `Próximo sinal em: ${tempo}s`;
      if (tempo <= 0) {
        gerarSinal();
        tempo = 60;
      }
      tempo--;
    }

    setInterval(atualizarTimer, 1000);
    gerarSinal();
  </script>

  <footer>
    © 2025 - Alvo-X | Simulador de Sinais OTC
  </footer>
</body>
</html>
